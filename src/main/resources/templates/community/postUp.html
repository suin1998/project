<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../static/css/postUp.css">
</head>
<body>
<header>
    <div class="logo">Logo</div>
    <nav>
        <a href="#">Logout</a>
        <a href="#">Main</a>
    </nav>
</header>
<div class="container">
    <form class="postForm">

        <label>ì‘ì„±ì</label>
        <input type="text" id="user-name" class="title" readonly>
        <input type="text" id="user-email" class="title" readonly>

        <label for="title-input">ì œëª©</label>
        <input type="text" id="title-input" class="title" required>

        <label>ì¶”ì²œ ì½”ë””</label>
        <div class="image-btn-box">
            <button type="button" class="open-modal-btn">ì´ë¯¸ì§€ ì¶”ê°€</button>
        </div>

        <!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ ì˜ì—­ -->
        <div class="image-list" id="imageList"></div>

        <!-- ì´ë¯¸ì§€ ì„ íƒ ëª¨ë‹¬ -->
        <div class="image-modal" id="imageModal">
            <div class="modal-content">
                <h3>ì´ë¯¸ì§€ ì„ íƒ</h3>

                <div class="image-category-box">
                    <button type="button" data-category="all" class="category-btn active">ì „ì²´</button>
                    <button type="button" data-category="top" class="category-btn">ìƒì˜</button>
                    <button type="button" data-category="bottom" class="category-btn">í•˜ì˜</button>
                    <button type="button" data-category="acc" class="category-btn">ì•…ì„¸ì„œë¦¬</button>
                </div>
                <div class="sample-image-list" id="sampleImageList">
                    <!-- JSì—ì„œ ìƒ˜í”Œ ì´ë¯¸ì§€ ìë™ ë¡œë“œ -->
                </div>

                <button class="modal-close-btn">ë‹«ê¸°</button>
            </div>
        </div>

        <label for="text-input">ë‚´ìš©</label>
        <textarea id="text-input" class="textPost" required></textarea>
        <div class="btn-group">
            <button type="submit" class="submit-btn">ì‘ì„±</button>
            <button type="button" class="delete-btn">ì‚­ì œ</button>
        </div>
    </form>
</div>

<script>
    const openModalBtn = document.querySelector(".open-modal-btn");
    const imageModal = document.getElementById("imageModal");
    const closeModalBtn = document.querySelector(".modal-close-btn");
    const sampleImageList = document.getElementById("sampleImageList");
    const imageList = document.getElementById("imageList");

    /* ğŸ”¥ ë¡œê·¸ì¸ ìœ ì € ì •ë³´ (ì„œë²„ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ê°’ìœ¼ë¡œ êµì²´í•˜ë©´ ë¨) */
    const loggedInUserName = "í™ê¸¸ë™";
    const loggedInUserEmail = "test@example.com";

    document.getElementById("user-name").value = loggedInUserName;
    document.getElementById("user-email").value = loggedInUserEmail;
    /* ìƒ˜í”Œ ì´ë¯¸ì§€ URL */
    const sampleImageURLs = [
        "https://picsum.photos/200?random=1",
        "https://picsum.photos/200?random=2",
        "https://picsum.photos/200?random=3",
        "https://picsum.photos/200?random=4",
        "https://picsum.photos/200?random=5",
        "https://picsum.photos/200?random=7",
        "https://picsum.photos/200?random=8",
        "https://picsum.photos/200?random=9",
        "https://picsum.photos/200?random=10",
        "https://picsum.photos/200?random=11",
        "https://picsum.photos/200?random=12"

    ];

    /* --- ìë™ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ ë¡œì§ --- */
    function classifyCategory(url) {
        const num = parseInt(url.match(/random=(\d+)/)[1]);

        if (num === 1 || num === 2 || num === 6) return "top";
        if (num === 3 || num === 4) return "bottom";
        if (num === 5) return "acc";
        return "top";
    }

    /* ìë™ ë¶„ë¥˜ëœ ìƒ˜í”Œ ì´ë¯¸ì§€ ë°°ì—´ ìƒì„± */
    const sampleImages = sampleImageURLs.map(url => ({
        url,
        category: classifyCategory(url)
    }));

    /* ëª¨ë‹¬ ì—´ê¸° */
    openModalBtn.addEventListener("click", () => {
        imageModal.style.display = "flex";
    });

    /* ëª¨ë‹¬ ë‹«ê¸° */
    closeModalBtn.addEventListener("click", () => {
        imageModal.style.display = "none";
    });

    /* ìƒ˜í”Œ ì´ë¯¸ì§€ ë Œë” í•¨ìˆ˜ */
    function renderSampleImages(filter = "all") {
        sampleImageList.innerHTML = "";
        sampleImages
            .filter(img => filter === "all" || img.category === filter)
            .forEach(img => {
                const div = document.createElement("div");
                div.classList.add("sample-image");
                div.innerHTML = `<img src="${img.url}" width="100%" height="100%" alt="" />`;

                div.addEventListener("click", () => {
                    addPreviewImage(img.url);
                    imageModal.style.display = "none";
                });

                sampleImageList.appendChild(div);
            });
    }

    renderSampleImages();

    /* ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ì´ë²¤íŠ¸ */
    document.querySelectorAll(".category-btn").forEach(btn => {
        btn.addEventListener("click", () => {
            document.querySelectorAll(".category-btn").forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            const category = btn.dataset.category;
            renderSampleImages(category);
        });
    });

    /* ë¯¸ë¦¬ë³´ê¸° ì¶”ê°€ */
    function addPreviewImage(imgURL) {
        const preview = document.createElement("div");
        preview.classList.add("image-preview");

        preview.innerHTML = `
        <img src="${imgURL}" alt="">
        <button class="delete-image-btn">X</button>
    `;

        imageList.appendChild(preview);

        // ì‚­ì œ ê¸°ëŠ¥
        preview.querySelector(".delete-image-btn").addEventListener("click", () => {
            preview.remove();
        });
    }

</script>
</body>
</html>