<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../static/css/userCommunity.css">
</head>
<body>
<header>
    <div class="logo">Logo</div>
    <nav>
        <a href="#">Logout</a>
        <a href="#">My Closet</a>
    </nav>
</header>

<div class="layout">
    <aside class="sidebar">
        <button>ë©”ë‰´ 1</button>
        <button>ë©”ë‰´ 2</button>
        <button>ë©”ë‰´ 3</button>
        <button>ë©”ë‰´ 4</button>
    </aside>

    <div class="container">
        <div class="top-bar">
            <div class="filter-bar" id="filter-bar">
                <select id="filter-list" class="filter-list">
                    <option value="latest">ìµœì‹ ìˆœ</option>
                    <option value="recommend">ì¶”ì²œìˆœ</option>
                    <option value="view">ì¡°íšŒìˆœ</option>
                </select>
            </div>

            <button class="newPost-btn" id="newPost">ê¸€ì“°ê¸°</button>
        </div>
        <div id="gallery" class="gallery"></div>

        <div class="pagination">
            <button class="page-btn" id="prev"> <</button>
            <div id="page-numbers"></div>
            <button class="page-btn" id="next"> ></button>
        </div>
    </div>
</div>

<script>
    // ì˜ˆì‹œ ê²Œì‹œê¸€ ë°ì´í„°
    const sampleData = Array.from({length: 30}).map((_, i) => ({
        id: i + 1,
        title: `ê²Œì‹œê¸€ ì œëª© ${i + 1}`,
        like: Math.floor(Math.random() * 100),
        dislike: Math.floor(Math.random() * 10),
        img: "https://picsum.photos/400?random=" + (i + 1),
        coordi: "ì—¬ê¸°ì— ì½”ë”” ì •ë³´ê°€ ë“¤ì–´ê°‘ë‹ˆë‹¤."
    }));

    const gallery = document.getElementById("gallery");
    const pageNumbers = document.getElementById("page-numbers");
    let currentPage = 1;
    const itemsPerPage = 9;

    // ê°¤ëŸ¬ë¦¬ ì¶œë ¥
    function renderGallery() {
        gallery.innerHTML = "";

        const start = (currentPage - 1) * itemsPerPage;
        const end = start + itemsPerPage;

        sampleData.slice(start, end).forEach(post => {
            gallery.innerHTML += `
            <div class="gallery-item">
                <div class="img-box">
                    <img src="${post.img}" alt="">
                    <div class="overlay">${post.coordi}</div>
                </div>
                <div class="gallery-info">
                    <div class="gallery-title" onclick="goDetail(${post.id})">${post.title}</div>
                    <div class="gallery-like">ğŸ‘ ${post.like} &nbsp; ğŸ‘ ${post.dislike}</div>
                </div>
        </div>`;
        });
    }

    //ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€ ì´ë™
    function goDetail(id) {
        window.location.href = `/post/${id}`;
    }

    // í˜ì´ì§€ ë²„íŠ¼ ì¶œë ¥
    function renderPagination() {
        pageNumbers.innerHTML = "";
        const group = Math.floor((currentPage - 1) / 10);
        const start = group * 10 + 1;
        const end = start + 9;

        for (let i = start; i <= end; i++) {
            const span = document.createElement("span");
            span.textContent = i;
            if (i === currentPage) span.classList.add("active");

            span.onclick = () => {
                currentPage = i;
                renderEverything();
            };

            pageNumbers.appendChild(span);
        }
    }

    // prev / next ë²„íŠ¼
    document.getElementById("prev").onclick = () => {
        if (currentPage > 1) {
            currentPage--;
            renderEverything();
        }
    };

    document.getElementById("next").onclick = () => {
        currentPage++;
        renderEverything();
    };

    function renderEverything() {
        renderGallery();
        renderPagination();
    }

    renderEverything();
</script>
</body>
</html>