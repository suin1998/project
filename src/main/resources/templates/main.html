<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>main</title>
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
<header>
    <div class="logo">Fit Maker</div>
    <div class="movementPage">
        <a href="/myCloset" onclick="return checkLogin()">My Closet</a>
        <a href="/AICoordinator" onclick="return checkLogin()">AI Coordinator</a>
        <a href="/community">Community</a>
    </div>
    <nav>
        <div class="headerBtn">
            <div id="authButtons" style="display: none;"><a href="/login">Login</a>
                <a href="/join">Join</a></div>

            <div id="logoutButtons" style="display: none;">
                <a href="/logout" id="logoutLink">Logout</a>
                <a href="/myCloset" onclick="return checkLogin()">My Closet</a>
<!--                <button id="MyClosetButton2">My Closet</button>-->
            </div>
        </div>
    </nav>
</header>

<section class="hero">
    <h1>í™ˆí˜ì´ì§€ ê´€ë ¨ ì„¤ëª…</h1>
    <p>ê´€ë ¨ëœ ì„¤ëª…ì´ë‚˜ ë‚ ì”¨ê°™ì€ ê²ƒì„ ì—°ë™í•´ì„œ ì„¤ëª…í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
</section>

<section class="service">
    <div class="title">
        <h1>Service</h1>
    </div>
    <div class="container">
        <div class="card">
            <img src="/image/main/clothes_pic.jpg" alt="">
            <!--            <h2>My Closet</h2>-->
            <!--            <p>ì‚¬ì§„ì„ ì°ì–´ ì˜¬ë ¤ì„œ ë‚´ê°€ ê°€ì§„ ì˜·ì„ ì •ë¦¬í•  ìˆ˜ ìˆì–´ìš”.</p>-->
            <div class="btn">
                <button id="MyClosetButton">My Closet</button>
            </div>
        </div>
        <div class="card">
            <img src="/image/main/clothes.jpg" alt="">
            <!--            <h2>AI Coordinator</h2>-->
            <!--            <p>AIì—ê²Œ ì½”ë””ë¥¼ ë¬¼ì–´ë³¼ ìˆ˜ ìˆì–´ìš”.</p>-->
            <div class="btn">
                <button id="AICoordinatorButton">AI Coordinator</button>
            </div>
        </div>
        <div class="card">
            <img src="/image/main/clothes_coord.jpg" alt="">
            <!--            <h2>Community</h2>-->
            <!--            <p>ë‚´ê°€ ê°€ì§„ ì½”ë””ë¥¼ ê³µìœ í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì‚¬ëŒì˜ ì½”ë”” ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”.</p>-->
            <div class="btn">
                <button id="communityButton">Community</button>
            </div>
        </div>
    </div>
</section>
<div class="explanation">
    <div class="explanation_text">
        <h1>í• ë©”ì´ì»¤ê°€ ë‹¹ì‹ ì˜ ì½”ë””ë¥¼ ë§Œë“¤ì–´ ë“œë¦½ë‹ˆë‹¤.</h1>
        <p>í• ë©”ì´ì»¤ëŠ” ì—¬ëŸ¬ë¶„ë“¤ì˜ ì˜·ì¥ ì† ì˜·ì„ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ë¶„ë“¤ì´ ì›í•˜ëŠ” ì§€ì—­, ë‚ ì§œ, ìŠ¤íƒ€ì¼, ìƒí™©ì— ë”°ë¼ ì½”ë””ë¥¼ ë§Œë“œëŠ” ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.
            ë‚´ê°€ ê°€ì§„ ì˜·ì„ í™œìš©í•˜ê³  ë‚´ê°€ ê°€ì§„ ì˜·ì´ ë¬´ì—‡ì´ ìˆëŠ”ì§€ í™•ì¸ í•´ë³´ê¸°ë„ í•˜ë©° ë‚´ê°€ ê°€ì§„ ì˜·ì„ ê´€ë¦¬ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
            ë‚´ ì˜·ì„ í™•ì¸ ëª»í•´ ë¹„ìŠ·í•œ ì˜·ì„ ì—¬ëŸ¬ ë²Œ êµ¬ë§¤í•˜ê±°ë‚˜ ë’¤ëŠ¦ê²Œ ì˜·ì„ ì‚¬ì•¼ê² ë‹¤ë¼ëŠ” ìƒê°ì´ ë“¤ì§€ ì•Šìœ¼ì…¨ë‚˜ìš”?
            <br> í• ë©”ì´ì»¤ê°€ ì´ëŸ° ì—¬ëŸ¬ë¶„ë“¤ì„ ìœ„í•œ ê´€ë¦¬ìì´ì ì½”ë””ë„¤ì´í„°ê°€ ë˜ì–´ ì¤„ ê²ë‹ˆë‹¤. AIë¥¼ í™œìš©í•œ ì½”ë””ë¥¼ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ë¶„ë“¤ì˜ ë©‹ìˆëŠ” ìŠ¤íƒ€ì¼ì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.</p>
    </div>
</div>
<div class="explanation">
    <div class="explanation_text">
        <h1>í• ë©”ì´ì»¤ê°€ ë‹¹ì‹ ì˜ ì½”ë””ë¥¼ ë§Œë“¤ì–´ ë“œë¦½ë‹ˆë‹¤.</h1>
        <p>í• ë©”ì´ì»¤ëŠ” ì—¬ëŸ¬ë¶„ë“¤ì˜ ì˜·ì¥ ì† ì˜·ì„ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ë¶„ë“¤ì´ ì›í•˜ëŠ” ì§€ì—­, ë‚ ì§œ, ìŠ¤íƒ€ì¼, ìƒí™©ì— ë”°ë¼ ì½”ë””ë¥¼ ë§Œë“œëŠ” ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.
            ë‚´ê°€ ê°€ì§„ ì˜·ì„ í™œìš©í•˜ê³  ë‚´ê°€ ê°€ì§„ ì˜·ì´ ë¬´ì—‡ì´ ìˆëŠ”ì§€ í™•ì¸ í•´ë³´ê¸°ë„ í•˜ë©° ë‚´ê°€ ê°€ì§„ ì˜·ì„ ê´€ë¦¬ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
            ë‚´ ì˜·ì„ í™•ì¸ ëª»í•´ ë¹„ìŠ·í•œ ì˜·ì„ ì—¬ëŸ¬ ë²Œ êµ¬ë§¤í•˜ê±°ë‚˜ ë’¤ëŠ¦ê²Œ ì˜·ì„ ì‚¬ì•¼ê² ë‹¤ë¼ëŠ” ìƒê°ì´ ë“¤ì§€ ì•Šìœ¼ì…¨ë‚˜ìš”?
            <br> í• ë©”ì´ì»¤ê°€ ì´ëŸ° ì—¬ëŸ¬ë¶„ë“¤ì„ ìœ„í•œ ê´€ë¦¬ìì´ì ì½”ë””ë„¤ì´í„°ê°€ ë˜ì–´ ì¤„ ê²ë‹ˆë‹¤. AIë¥¼ í™œìš©í•œ ì½”ë””ë¥¼ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ë¶„ë“¤ì˜ ë©‹ìˆëŠ” ìŠ¤íƒ€ì¼ì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.</p>
    </div>
</div>
<div class="explanation">
    <div class="explanation_text">
        <h1>í• ë©”ì´ì»¤ê°€ ë‹¹ì‹ ì˜ ì½”ë””ë¥¼ ë§Œë“¤ì–´ ë“œë¦½ë‹ˆë‹¤.</h1>
        <p>í• ë©”ì´ì»¤ëŠ” ì—¬ëŸ¬ë¶„ë“¤ì˜ ì˜·ì¥ ì† ì˜·ì„ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ë¶„ë“¤ì´ ì›í•˜ëŠ” ì§€ì—­, ë‚ ì§œ, ìŠ¤íƒ€ì¼, ìƒí™©ì— ë”°ë¼ ì½”ë””ë¥¼ ë§Œë“œëŠ” ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.
            ë‚´ê°€ ê°€ì§„ ì˜·ì„ í™œìš©í•˜ê³  ë‚´ê°€ ê°€ì§„ ì˜·ì´ ë¬´ì—‡ì´ ìˆëŠ”ì§€ í™•ì¸ í•´ë³´ê¸°ë„ í•˜ë©° ë‚´ê°€ ê°€ì§„ ì˜·ì„ ê´€ë¦¬ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
            ë‚´ ì˜·ì„ í™•ì¸ ëª»í•´ ë¹„ìŠ·í•œ ì˜·ì„ ì—¬ëŸ¬ ë²Œ êµ¬ë§¤í•˜ê±°ë‚˜ ë’¤ëŠ¦ê²Œ ì˜·ì„ ì‚¬ì•¼ê² ë‹¤ë¼ëŠ” ìƒê°ì´ ë“¤ì§€ ì•Šìœ¼ì…¨ë‚˜ìš”?
            <br> í• ë©”ì´ì»¤ê°€ ì´ëŸ° ì—¬ëŸ¬ë¶„ë“¤ì„ ìœ„í•œ ê´€ë¦¬ìì´ì ì½”ë””ë„¤ì´í„°ê°€ ë˜ì–´ ì¤„ ê²ë‹ˆë‹¤. AIë¥¼ í™œìš©í•œ ì½”ë””ë¥¼ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ë¶„ë“¤ì˜ ë©‹ìˆëŠ” ìŠ¤íƒ€ì¼ì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.</p>
    </div>
</div>
</body>

<script>
    // ğŸ’¡ ì¶”ê°€: ë¦¬ë””ë ‰ì…˜ URL íŒŒë¼ë¯¸í„° ì´ë¦„ ì •ì˜ (ë¡œê·¸ì¸ í˜ì´ì§€ì˜ JSì™€ ì¼ì¹˜í•´ì•¼ í•¨)
    const REDIRECT_PARAM_NAME = 'redirectTo';
    const VALIDATE_TOKEN_API_URL = '/auth/validate';
    const accessToken = localStorage.getItem('accessToken');
    const authButtons = document.getElementById('authButtons');
    const logoutButtons = document.getElementById('logoutButtons');

    function redirectToMyCloset() {
        const accessToken = localStorage.getItem('accessToken');

        if (!accessToken) {
            // í† í°ì´ ì—†ìœ¼ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì•ˆë‚´
            alert('My Closetì€ ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.');
            window.location.href = '/login';
        } else {
            // í† í°ì´ ìˆìœ¼ë©´ MyPageë¡œ ì´ë™ ì‹œë„
            window.location.href = '/myPage';
        }
    }

    // AI Coordinator ë²„íŠ¼ í´ë¦­ ì‹œ /AICoordinator ê²½ë¡œë¡œ ì´ë™í•©ë‹ˆë‹¤.

    // Community ë²„íŠ¼ í´ë¦­ ì‹œ /community ê²½ë¡œë¡œ ì´ë™í•©ë‹ˆë‹¤.
    function redirectToCommunity() {
        // ì»¤ë®¤ë‹ˆí‹° í˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ëŠ” ì„œë²„ ê²½ë¡œë¡œ ìˆ˜ì •í•´ì£¼ì„¸ìš”.
        // ì˜ˆë¥¼ ë“¤ì–´, /communityë¡œ ë§¤í•‘ëœ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ community.html í…œí”Œë¦¿ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
        window.location.href = '/community';
    }

    function redirectToAICoordinator() {
        if (!accessToken) {
            window.location.href = '/login';
        } else {
            window.location.href = '/AICoordinator';
        }
    }

    document.addEventListener('DOMContentLoaded', function () {
        // 1. í˜ì´ì§€ ë¡œë“œ ì‹œ ì¸ì¦ ìƒíƒœ í™•ì¸ ë° ë²„íŠ¼ ì—…ë°ì´íŠ¸
        updateAuthButtons();

        // 2. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²°
        const logoutLink = document.getElementById('logoutLink');
        if (logoutLink) {
            logoutLink.addEventListener('click', handleLogout);
        }

        const communityButton = document.getElementById('communityButton');
        if (communityButton) {
            communityButton.addEventListener('click', redirectToCommunity);
        }

        const AICoordinatorButton = document.getElementById('AICoordinatorButton');
        // ğŸ’¡ ìˆ˜ì •ëœ í•¨ìˆ˜ ì—°ê²°
        if (AICoordinatorButton) {
            AICoordinatorButton.addEventListener('click', redirectToAICoordinator);
        }

        const MyPageButton = document.getElementById('MyPageButton');
        const MyPageButton2 = document.getElementById('MyPageButton2');

        if (MyPageButton) {
            MyPageButton.addEventListener('click', redirectToMyPage);
        }
        if (MyPageButton2) {
            MyPageButton2.addEventListener('click', redirectToMyPage);
        }
    });

    // ========== ë¡œê·¸ì¸ í™•ì¸ ë° ë¦¬ë””ë ‰ì…˜ ë¡œì§ (ì¶”ê°€/ìˆ˜ì •) ==========

    // ğŸ’¡ ì¶”ê°€: ì§€ì •ëœ ê²½ë¡œë¡œ ì´ë™ì„ ì‹œë„í•˜ë‹¤ê°€ ë¹„ë¡œê·¸ì¸ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
    function redirectToLogin(targetPath) {
        // ëª©í‘œ ê²½ë¡œ(ì˜ˆ: /AICoordinator)ë¥¼ ì¸ì½”ë”©í•˜ì—¬ redirectTo íŒŒë¼ë¯¸í„°ë¡œ ì¶”ê°€
        window.location.href = `/login?${REDIRECT_PARAM_NAME}=${encodeURIComponent(targetPath)}`;
        return false;
    }

    // AI Coordinator ë²„íŠ¼ í´ë¦­ ì‹œ (ìˆ˜ì •)
    function redirectToAICoordinator() {
        const targetPath = '/AICoordinator';
        if (!accessToken) {
            // í† í°ì´ ì—†ìœ¼ë©´ AI Coordinator ê²½ë¡œë¥¼ ê°€ì§€ê³  ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
            return redirectToLogin(targetPath);
        } else {
            // í† í°ì´ ìˆìœ¼ë©´ ë°”ë¡œ AI Coordinator í˜ì´ì§€ë¡œ ì´ë™
            window.location.href = targetPath;
        }
    }

    // My Closet ë²„íŠ¼ í´ë¦­ ì‹œ (ìˆ˜ì •: MyCloset ê²½ë¡œë¥¼ ì „ë‹¬)
    function redirectToMyCloset() {
        const targetPath = '/myCloset';
        if (!accessToken) {
            return redirectToLogin(targetPath);
        } else {
            window.location.href = targetPath;
        }
    }

    // í—¤ë”ì˜ ë§ˆì´í´ë¡œì ¯ í´ë¦­ ì‹œ ë¡œê·¸ì¸ í™•ì¸ ì—¬ë¶€ (ìˆ˜ì •: MyPage ê²½ë¡œë¥¼ ì „ë‹¬)
    function checkLogin() {
        const targetPath = '/MyPage';
        if (!accessToken) {
            return redirectToLogin(targetPath);
        } else {
            // í† í°ì´ ìˆìœ¼ë©´ <a> íƒœê·¸ì˜ href="/MyPage" ë™ì‘ì„ ë”°ë¦„ (í˜¹ì€ ëª…ì‹œì ìœ¼ë¡œ ì´ë™)
            return true;
        }
    }

    // Community ë²„íŠ¼ í´ë¦­ ì‹œ (ë¡œê·¸ì¸ì´ í•„ìš” ì—†ë‹¤ê³  ê°€ì •í•˜ê³  ê¸°ì¡´ ë¡œì§ ìœ ì§€)
    function redirectToCommunity() {
        window.location.href = '/community';
    }


    // ========== ì¸ì¦ ìƒíƒœì— ë”°ë¼ ë²„íŠ¼ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í•µì‹¬ í•¨ìˆ˜ (ê¸°ì¡´ê³¼ ë™ì¼) ==========
    function updateAuthButtons() {
        if (accessToken) {
            // í† í°ì´ ì¡´ì¬í•˜ë©´ (ë¡œê·¸ì¸ ìƒíƒœ)
            if (authButtons) authButtons.style.display = 'none';
            if (logoutButtons) logoutButtons.style.display = 'flex';
        } else {
            // í† í°ì´ ì—†ìœ¼ë©´ (ë¹„ë¡œê·¸ì¸ ìƒíƒœ)
            if (authButtons) authButtons.style.display = 'flex';
            if (logoutButtons) logoutButtons.style.display = 'none';
        }
    }

    // ========== ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ í•¨ìˆ˜ (ê¸°ì¡´ê³¼ ë™ì¼) ==========
    function handleLogout(event) {
        event.preventDefault();

        localStorage.removeItem('accessToken');
        localStorage.removeItem('refreshToken');

        updateAuthButtons();
        window.location.reload();
    }
</script>

</html>
